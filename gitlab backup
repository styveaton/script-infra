MÃ‰THODE 1 â€” BACKUP OFFICIEL GITLAB (RECOMMANDÃ‰E)
1ï¸âƒ£ CrÃ©er un backup COMPLET GitLab
docker exec -it gitlab gitlab-backup create


ğŸ‘‰ Ã‡a sauvegarde :

repos Git

base PostgreSQL

issues, MR, users

CI/CD, artifacts

registry (si activÃ©)

ğŸ“ Fichier crÃ©Ã© ici (sur le host) :

/opt/gitlab/backups/


Exemple :

1703859302_2025_12_29_17.8.2_gitlab_backup.tar

2ï¸âƒ£ Sauvegarder la CONFIGURATION (CRITIQUE)
tar -czvf gitlab-config-backup.tar.gz \
  /opt/gitlab/config \
  /opt/gitlab/data/gitlab-secrets.json


ğŸ‘‰ TRÃˆS IMPORTANT
Sans gitlab-secrets.json, les mots de passe & tokens seront invalides.

3ï¸âƒ£ Sauvegarde COMPLÃˆTE Ã€ TRANSFÃ‰RER

Tu dois copier vers lâ€™autre serveur :

/opt/gitlab/backups/*.tar
gitlab-config-backup.tar.gz
docker-compose.yml
.env


ğŸ‘‰ Exemple :

scp /opt/gitlab/backups/*.tar user@new-server:/backup/
scp gitlab-config-backup.tar.gz user@new-server:/backup/

ğŸ¥ˆ MÃ‰THODE 2 â€” BACKUP PAR VOLUMES (RAPIDE MAIS MOINS PRO)

âš ï¸ Moins recommandÃ©, mais possible.

docker-compose down

tar -czvf gitlab-full-volume-backup.tar.gz \
  /opt/gitlab/data \
  /opt/gitlab/config \
  /opt/gitlab/logs


ğŸ‘‰ Avantage : rapide
ğŸ‘‰ InconvÃ©nient : dÃ©pend de la version GitLab

ğŸ” RESTAURATION SUR UN AUTRE HOST (PAS Ã€ PAS)
1ï¸âƒ£ Installer Docker + Docker Compose

MÃªme version si possible.

2ï¸âƒ£ DÃ©ployer GitLab VIDE

Sur le nouveau serveur :

mkdir -p /opt/gitlab/{data,config,logs,backups}
cd /opt/gitlab


Copie :

docker-compose.yml

.env

Puis :

docker-compose up -d


â³ Attendre que GitLab dÃ©marre une premiÃ¨re fois
Puis STOP :

docker-compose down

3ï¸âƒ£ Restaurer les fichiers
Copier les backups :
cp /backup/* /opt/gitlab/backups/

Restaurer la config :
tar -xzvf gitlab-config-backup.tar.gz -C /

4ï¸âƒ£ DÃ©marrer GitLab
docker-compose up -d

5ï¸âƒ£ Restaurer le BACKUP GitLab
docker exec -it gitlab gitlab-backup restore BACKUP=1703859302_2025_12_29_17.8.2


âš ï¸ Utilise le nom sans _gitlab_backup.tar

6ï¸âƒ£ Reconfigurer & redÃ©marrer
docker exec -it gitlab gitlab-ctl reconfigure
docker exec -it gitlab gitlab-ctl restart

âœ… RÃ‰SULTAT FINAL

ğŸ‰ Tu retrouves :

utilisateurs

mots de passe

projets

repos

CI/CD

settings

emails

tokens

ğŸ‘‰ Ã€ Lâ€™IDENTIQUE de lâ€™ancien serveur

â° BACKUP AUTOMATIQUE (TRÃˆS RECOMMANDÃ‰)
Cron quotidien
crontab -e

0 2 * * * docker exec gitlab gitlab-backup create


ğŸ‘‰ Backup chaque nuit Ã  02h

â˜ï¸ OPTION PRO (SI TU VEUX)

Je peux tâ€™aider Ã  :

envoyer les backups vers S3 / Wasabi / Google Drive

chiffrer les backups

restaurer sur AWS / OVH / Hetzner

tester un plan de disaster recovery

ğŸ¯ RÃ‰SUMÃ‰ ULTRA CLAIR
Action	Obligatoire
gitlab-backup create	âœ…
Sauvegarde gitlab-secrets.json	âœ…
Copier backups	âœ…
Restore via gitlab-backup restore	âœ…

ğŸ‘‰ Dis-moi :

si tu veux un script automatique

ou une restauration test

ou un backup cloud

Bravo ğŸ‰ tu as maintenant un GitLab PRODUCTION-READY
